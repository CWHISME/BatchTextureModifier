# BatchTextureModifier

主要是实现一个批量图片处理功能，例如批量进行格式转换的同时，对图片做一些裁剪、缩放等操作。

使用 WPF .NetCore6.0 开发

目前支持：

1. 批量处理图片(也可以单图处理)
2. 预览修改效果、及修改后文件大小
3. 覆盖修改、自动备份(前提是直接覆盖修改的话)
4. 多种模式缩放图片
5. 按照指定参数，批量转换图片格式为 `*.png` `*.jpg` `*.webp` `*.tga` `*.bmp` `*.gif`
    * 支持自动读取的后缀为：`*.png` `*.jpg` `*.jpeg` `*.webp` `*.tga` `*.bmp` `*.gif`
    * (如果发现批量处理时没有读取到，可以检查是否图片后缀不对劲)
6. POT缩放(用过 Unity 的应该知道什么意思，不过这个跟 Unity 强行拉伸方式不同，而是比例缩放)
7. 多线程处理，同时开启处理量取决于CPU核心数目
8. 处理转为 `jpg` `Webp` 格式时可选限制最终生成的文件大小，超出指定大小会尝试降低质量进行迭代（会极大增加额外消耗）

# 更新日志

* V1.2.0
	* 2023.2.4
	* 增加小工具页
	* 单图保存时默认赋值原图名
	* 修复文件大小限制时，`JPG` 与 `Webp` 设置重叠问题
	* 手动保存文件时不再隐藏其它文件(这样可以不同格式之间进行覆盖)
	* 增加选择、保存路径的历史记录(每个功能的路径单独记录)，同种功能自动识别上一次选择的路径
	* `.jpeg` 后缀的文件也加入处理列表

* V1.1.0(2023.2.3)
	* 预览图异步加载，避免图太大导致卡界面
	* 若转化 `tga` 格式不再加载预览图，并取消其预览报错及弹窗提示
	* 增加对处理图片后文件大小的限制选项：若处理后文件大小超出指定限制，则尝试降低质量以满足需求
	* 优化批量处理时的取消操作

* V1.0.0(2023.1.22)
	* 第一版

# 计划实现

* [ ] 优化批处理时内存占用峰值
* [ ] `直接裁剪` 支持选择从 `上、下、左、右、中心` 开始裁剪
* [ ] 批处理时，可选 `全部处理`、`仅对透明通道图片做处理`、或 `仅对不透明图片做处理`
* [ ] 批处理时，可选忽略本就是 `目标格式` 或 `分辨率` 的图片，避免冗余处理
* [ ] 增加 `GIF` 单独处理页面，支持将批量图片生成 `GIF`，或将 `GIF` 分离成一张张单图
* [ ] 保存选择过的目录路径缓存(方便关闭后下次打开应用)

# 使用

UI 觉得做的挺简单的，直接看图吧。

主页：

![](Images/Snipaste_2023-01-21_19-51-37.jpg)

日志：

![](Images/Snipaste_2023-01-22_10-54-54.jpg)

大多数选项将鼠标移动上去时，会进行对应的提示：

![](Images/Snipaste_2023-02-03_15-01-24.jpg)

# 其它

开发记录：[开发一个批量图片处理工具
](https://wangjiaying.top/2023/01/21/%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%89%B9%E9%87%8F%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7/)

更多介绍见：[详细使用说明](https://wangjiaying.top/2023/02/05/BatchTextureModifier%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/)

# 感谢

图片处理基于图像库 [ImageSharp](https://github.com/SixLabors/ImageSharp)